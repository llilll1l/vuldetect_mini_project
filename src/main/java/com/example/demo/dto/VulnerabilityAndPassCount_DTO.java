package com.example.demo.dto;

import com.example.demo.entity.DiagnosisItem;
import lombok.Getter;
import lombok.Setter;

import java.util.List;

@Getter @Setter
public class VulnerabilityAndPassCount_DTO {

    private int countPass;
    private int countTotalVulnerable;
    private int countLevel1;
    private int countLevel2;
    private int countLevel3;
    private int totalCount;
    private double passPercentage;
    private double totalVulnerablePercentage;
    private double level1Percentage;
    private double level2Percentage;
    private double level3Percentage;

    public VulnerabilityAndPassCount_DTO(List<DiagnosisItem> diagnosisItems) {
        this.totalCount = diagnosisItems.size();
        // 다른 계산 로직 추가
        for (DiagnosisItem item : diagnosisItems) {
            if ("양호".equals(item.getResult())) {
                countPass++;
            } else if ("취약".equals(item.getResult())) {
                countTotalVulnerable++;
                if (item.getAzrDescription().getVulnerableLevel() == 1) {
                    countLevel1++;
                } else if (item.getAzrDescription().getVulnerableLevel() == 2) {
                    countLevel2++;
                } else if (item.getAzrDescription().getVulnerableLevel() == 3) {
                    countLevel3++;
                }
            }
        }
        //this.passPercentage = (double) this.countPass / this.totalCount * 100;
        this.passPercentage = Math.round((double) this.countPass / this.totalCount * 1000)/10.0;

        this.totalVulnerablePercentage = Math.round((double) this.countTotalVulnerable / this.totalCount * 1000)/10.0;
        this.level1Percentage = Math.round((double) this.countLevel1 / this.totalCount * 1000)/10.0;
        this.level2Percentage = Math.round((double) this.countLevel2 / this.totalCount * 1000)/10.0;
        this.level3Percentage = Math.round((double) this.countLevel3 / this.totalCount * 1000)/10.0;
    }

}






